---
import { getCollection } from "astro:content";
import PageLayout from "@/layouts/Base";
import PostPreview from "@/components/blog/PostPreview";
import SocialList from "@/components/SocialList";
import { MY_SKILL, PLAN_TO_LEARN } from "@/data/constants";
import { sortMDByDate } from "@/utils";
import { t, changeLanguage } from "i18next";

changeLanguage("en");

const MAX_POSTS = 10;
const allPosts = await getCollection("post");
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS);
---

<PageLayout meta={{ title: "Home" }}>
	<section>
		<h1 class="title mb-6">
			Hello World! <span class="text-red-600">UNDER CONSTRUCTION ðŸš§</span>
		</h1>
		<p class="mb-4 text-base">
			Hi, Iâ€™m a theme for Astro, an example of how you can use this starter to create a
			personal blog. If you want to know more about how you can customise me, add more posts,
			and make it your own, click on one the github icon link below which will take you to my
			repo.
		</p>
		<SocialList />
	</section>
	<section class="mt-12">
		<h2 class="title mb-4 text-xl">My Skills</h2>
		{
			MY_SKILL.map((skill) => (
				<div class="mr-2 mb-2 inline-block bg-textColor px-4 py-2 text-base font-semibold text-bgColor">
					{skill.title}
				</div>
			))
		}
		<h2 class="text-l mb-4 font-bold">Technologie I plan to learn</h2>
		{
			PLAN_TO_LEARN.map((skill) => (
				<div class="text-md mr-2 mb-2 inline-block bg-textColor px-4 py-2 font-semibold text-bgColor">
					{skill.title}
				</div>
			))
		}
	</section>
	<section aria-label="Blog post list" class="mt-12">
		<h2 class="title mb-4 text-xl">Projects</h2>
		<ul class="space-y-4 sm:space-y-2">
			{
				allPostsByDate.map((p) => (
					<li class="flex flex-col flex-wrap gap-x-2 sm:flex-row [&_q]:w-full">
						<PostPreview post={p} withDesc={true} />
					</li>
				))
			}
		</ul>
	</section>
</PageLayout>
